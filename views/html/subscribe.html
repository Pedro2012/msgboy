<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <title>Msgboy WebIntents Subscription</title>
        <meta name="application-name" content="Msgboy" />
        <link rel="stylesheet" href="../css/style.css" />
        
        <!-- Error Reporting Code -->
        <script type="text/javascript" src="../../controllers/error_notifier.js"></script>
        
        <!-- Lib includes -->
        <script src="../../lib/jquery/jquery.js" type="text/javascript"></script> 
        <script src="../../lib/underscore/underscore-min.js" type="text/javascript"></script> 
        <script src="../../lib/backbone/backbone-min.js" type="text/javascript"></script> 
        <script src="../../lib/backbone-indexeddb/backbone-indexeddb.js" type="text/javascript"></script> 
        <script src="../../lib/jquery/jquery.isotope.min.js" type="text/javascript"></script> 
        <script src="../../lib/date.format.js" type="text/javascript"></script> 
        <script src="../../lib/brain-0.3.5.min.js" type="text/javascript" ></script>
        <script src="../../lib/stemmer.js" type="text/javascript" ></script>

        <!-- Controller includes -->
        <script src="../../controllers/msgboy.js" type="text/javascript"></script> 
        <script src="../../controllers/events.js" type="text/javascript"></script> 
        <script src="../../controllers/utils.js" type="text/javascript"></script> 
        <script src="../../controllers/bayesian_filter.js" type="text/javascript"></script> 
        
        <!-- Model includes -->
        <script src="../../models/database.js" type="text/javascript"></script> 
        <script src="../../models/message.js" type="text/javascript"></script> 
        <script src="../../models/archive.js" type="text/javascript"></script> 
        <script src="../../models/inbox.js" type="text/javascript"></script> 
        <script src="../../models/subscription.js" type="text/javascript"></script> 
        
    </head>
    <body>
        <script>
            var url =  unescape(window.location.search.match(/\?url=(.*)/)[1]);
            chrome.extension.sendRequest({
                signature: "subscribe",
                params: {
                    title: "", // TODO : Add support for title from the webIntents params... that should be easy to do.
                    url: url
                }
            }, function (response) {
                alert("Subscribed to " + url);
            });
        </script>
    </body>
</html>
