<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="application-name" content="Msgboy"/>
    <link rel="shortcut icon" href="http://superfeedr.com/favicon.ico">
    <link rel="stylesheet" href="../css/readability.css" />
    <link rel="stylesheet" href="../css/readability-print.css" />

    <!-- Lib includes -->
    <script src="../../lib/jquery/jquery.js" type="text/javascript"></script> 
    <script src="../../lib/date.extensions.js" type="text/javascript"></script> 
    <script src="../../lib/underscore/underscore-min.js" type="text/javascript"></script> 
    <script src="../../lib/backbone/backbone-min.js" type="text/javascript"></script> 
    <script src="../../lib/backbone-indexeddb/backbone-indexeddb.js" type="text/javascript"></script> 
    <script src="../../lib/readability/readability.js" type="text/javascript"></script> 

    <!-- Model includes -->
    <script src="../../models/database.js" type="text/javascript"></script> 
    <script src="../../models/message.js" type="text/javascript"></script> 

    <!-- Controller includes -->
    <script src="../../controllers/utils.js" type="text/javascript"></script> 
</head>
<body>

    <div id="wrapper">
	    
    </div>

    <script>

	//////////////////////////////////////////////////////////////////////////////////////
	//                                Views                                           //
	//////////////////////////////////////////////////////////////////////////////////////
	var MessageView = Backbone.View.extend({

	    initialize: function () {
	        this.model.view = this;
	        this.model.fetch({
				success: function(model) {
					this.model = model
					this.render();
				}.bind(this)
			});
	    },

	    render: function () {
			$("#wrapper").html(this.model.attributes.summary);
			document.title = this.model.attributes.title
		    readability.init();
	        return this;
	    }
	
	});

	var readStyle = 'style-ebook'; // style-newspaper, style-novel, style-ebook, style-terminal
    var readSize = 'size-small'; // size-small, size-medium, size-large, size-x-large
    var readMargin = 'margin-narrow'; // margin-narrow, margin-medium, margin-wide, margin-x-wide
	var message = new Message({id: "ffc7ee4e9240a132f5074ff4e6ca68da"});
	var view = new MessageView({
        model: message
    });

	</script>
</body>
</html>


