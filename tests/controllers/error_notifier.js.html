<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <link rel="stylesheet" href="../qunit.css" type="text/css" media="screen" />
    <script type="text/javascript" src="../qunit.js"></script>

    <!-- Dependencies -->
    <script src="../../lib/underscore/underscore-min.js" type="text/javascript"></script> 
    <script src="../../lib/backbone/backbone-min.js" type="text/javascript"></script> 
    <script src="../../lib/backbone-indexeddb/backbone-indexeddb.js" type="text/javascript"></script> 
    <script src="../../lib/strophejs/base64.js" type="text/javascript"></script> 
    <script src="../../lib/strophejs/md5.js" type="text/javascript"></script> 
    <script src="../../lib/strophejs/core.js" type="text/javascript"></script> 

    <!-- Lib includes -->
    <script src="../../lib/jquery/jquery.js" type="text/javascript"></script>
    <script src="../../lib/underscore/underscore-min.js" type="text/javascript"></script>
    <script src="../../lib/backbone/backbone-min.js" type="text/javascript"></script>
    <script src="../../lib/backbone-indexeddb/backbone-indexeddb.js" type="text/javascript"></script>
    <script src="../../controllers/msgboy.js" type="text/javascript"></script> 
    <script src="../../controllers/utils.js" type="text/javascript"></script> 
    <script src="../../controllers/error_notifier.js" type="text/javascript"></script> 
    
    <!-- Model includes -->
    <script src="../../models/database.js" type="text/javascript"></script>
    <script src="../../models/message.js" type="text/javascript"></script>
    <script src="../../models/archive.js" type="text/javascript"></script>
    <script src="../../models/inbox.js" type="text/javascript"></script>
    
    <title>Error Notifier QUnit test</title>
</head>
<body>
    <h1 id="qunit-header">Archive QUnit test</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="log" style=""></div>
    
    <script>
    Msgboy.bind("loaded", function () {
        Msgboy.inbox = new Inbox();
        Msgboy.inbox.bind("change", function () {
            
            var error = {
                message : "There was an error",
                stack   : '()@' + "file.js" + ':' + 1337
            }
            var xml = Hoptoad.generateXML(error);
            
        });
        Msgboy.inbox.fetch();
    });
    Msgboy.run();
    
    </script>
    
</body>
</html>